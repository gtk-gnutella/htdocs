<!-- $Id$ -->
<h1 align="center">FAQ</h1>

<!--
  --
  -- TOC
  --
  -->

<h2>General</h2>
<ul>
  <li><a href="#general0">What is gnutella anyway?</a></li>
  <li><a href="#general1">This eats up too much bandwidth!</a></li>
  <li><a href="#general2">What is an Ultrapeer?</a></li>
</ul>

<h2>Gnutella connections</h2>
<ul>
  <li><a href="#gnet0">What is a good number of connections?</a></li>
  <li><a href="#gnet1">Do I need to forward a port on my firewall?</a></li>
  <li><a href="#gnet2">What does "[FC]" mean?</a></li>
  <li><a href="#gnet3">Why do I lose gnet connections when i have an upload?</a></li>
  <li><a href="#gnet4">What does this stuff in the Flags column mean?</a></li>
  <li><a href="#gnet5">What does "Harmful version banned, upgrade required" mean?</a></li>
  <li><a href="#gnet6">What does "Outdated version, please upgrade" mean?</a></li>
  <li><a href="#gnet7">Why doesn't my HTTP proxy work?</a></li>
</ul>

<h2>Searches</h2>
<ul>
  <li><a href="#search0">How can I get more results?</a></li>
  <li><a href="#search1">Where did the filters go?</a></li>
  <li><a href="#search3">How can I ignore files with no SHA1?</a></li>
</ul>

<h2>Downloads</h2>
<ul>
  <li><a href="#down0">What does the status "Ignoring requested [SHA1|name & size]" mean?</a></li>
  <li><a href="#down1">What does the status "No URN on server" mean?</a></li>
  <li><a href="#down2">Why is the same file downloaded X times?</a></li>
  <li><a href="#down3">What is "swarming"?</a></li>
  <li><a href="#down4">What is a "chunk"?</a></li>
  <li><a href="#down5">What is the "download mesh"?</a></li>
  <li><a href="#down6">What is a "push request"?</a></li>
  <li><a href="#down7">Why does gtk-gnutella append a .OK to my filenames?</a></li>
</ul>

<h2>Uploads</h2>
<ul>
  <li><a href="#up0">What does "Normalized" mean?</a></li>
</ul>

<h2>GTK+ 2.x</h2>
<ul>
  <li><a href="#gtk2_fonts">I have problems with the fonts.</a></li>
  <li><a href="#gtk2_ctype">Non-ASCII characters show up as _ (underscore).</a></li>
</ul>

<!--
  --
  -- Questions and anwers below
  --
  -->

<hr>

<h2>General</h2>

<h3><a name="general0">What is gnutella anyway?</a></h3>
<p>
  Gnutella is a decentralized Peer to Peer information exchanging network. At the 
  moment you can publish and download files of any kind using the Gnutella network. 
  For more information, visit the <a href="http://www.infoanarchy.org/wiki/wiki.pl?Gnutella"> 
  definition of gnutella</a> on the infoAnarchy wiki.
</p>

<h3><a name="general1">This eats up too much bandwidth!</a></h3>
<p>
  At the moment you can try one or more of the following things if you are a user 
  on a slow line (modem):
  <ul>
    <li>Limit the number of GNet connections you have.</li>
    <li>If you are able to receive incoming connections, enable "prefer compressed 
      connections" in the GnutellaNet options (expert mode needs to be enabled.)</li>
    <li>Depress the lower-left button in the GUI after your downloads have started.
      This will disconnect from the Gnutella network.  We strongly advise you to NOT 
      do that. You won't be able to get more alternate locations from the net and 
      people won't be able to search your files.</li>
  </ul>
</p>

<h3><a name="general2">What is an Ultrapeer?</a></h3>
<p>
  An Ultrapeer shields modem users or users that otherwise can't dedicate their 
  bandwidth to gnet traffic from the network traffic by behaving as their "router".  
  For the modem users connected (called leaves/leafs or ultraleaves/ultraleafs) 
  it looks like they are connected to some kind of server. <br>
  gtk-gnutella will support ultrapeers and leaves with version 0.92.  
</p>

<h2>Gnutella connections</h2>

<h3><a name="gnet0">What is a good number of connections?</a></h3>
<p>
  A good number is 4/5 (minimum/maximum). You can calculate a bandwidth
  consumption of 1kb/s per connection. You should never use up all your
  bandwidth with those. Especially on an asymetric cable/DSL connection you
  can easily starve your incoming traffic by producing too much outgoing
  traffic (TCP/IP issue). Use at most half of your outgoing bandwidth with
  gNet connections. E.g. on a line with 128kbit/s upstream set up at most
  8 connections. By using more than 10 connections you harm the gnutella network
  because message routing tables will invalidate too early. Avoid setting the max
  connections to a high value!<br>
  The bandwidth control settings will help you further finetune gtk-gnutella's
  bandwidth usage.
</p>

<h3><a name="gnet1">Do I need to forward a port on my firewall?</a></h3>
<p>
  You don't need to forward any ports for gtk-gnutella to work, but it
  will perform much better if you do. If gtk-gnutella thinks you are firewalled,
  it will not show any <a href="#down3">"push"</a> results since you wouldn't be
  able to download those anyway.<br>
  Even when people cannot connect directly to you, they can still download files from
  your node using a <a href="#down3">push request</a>.<br>
  You can configure the port gtk-gnutella listens on. The setting "listen port" is
  located on the "Network settings" tab on the config page.
</p>

<h3><a name="gnet2">What does "[FC]" mean?</a></h3>
<p>
  The FC means "flow control".<br>
  In general, you should make sure that servents to which you are connected do 
  not flow control.  Watch for the trailing "[FC]" indication at the end of the 
  Info string (you may need to drag the right edge past the window to trigger 
  the underlying scroll bar), or look at the FC state in the <a href="#gnet4">Flags</a> 
  column. As a rule of thumb, if you have more than one node flow-controlling 
  at a given time, you don't have enough outgoing bandwidth dedicated to Gnet, 
  and therefore you are harming the network: either decrease the amount of 
  connections, enable the compression preferance, or raise the outgoing bandwidth 
  limit. 
</p>

<h3><a name="gnet3">Why do I lose gnet connections when I have an upload?</a></h3>
<p>
  Try to do bandwidth limiting. If that doesn't help, maybe your provider throttles 
  gnutella traffic. Try changing your gnutella port in the network settings of 
  gtk-gnutella.  
</p>

<h3><a name="gnet4">What does the stuff in the Flags column mean?</a></h3>
<p>
  You can see the type and some of the settings of a connection here.
  <pre>
     012345678 (offset)
     NIrwqTRFh
     ^^^^^^^^^
     ||||||||+ hops flow triggerd (h), or total query flow control (f)
     |||||||+  flow control (F), or pending data in queue (d)
     ||||||+   indicates whether RX is compressed
     |||||+    indicates whether TX is compressed
     ||||+     indicates whether we sent/received a QRT, or send/receive one
     |||+      indicates whether node is writable
     ||+       indicates whether node is readable
     |+        indicates connection type (Incoming, Outgoing, Ponging)
     +         indicates peer mode (Normal, Ultra, Leaf)
  </pre>
</p>

<h3><a name="gnet5">What does "Harmful version banned, upgrade required" mean?</a></h3>
<p>
  Sometimes, servents are discovered to have a bug or behaviour that is harmful 
  to the gnet.  For example, gtk-gnutella-0.92b had a bug that generated excessive 
  queries which hammered on the <a href="index.php?page=gwebcache">GWebCache system</a>.  
  Such banning is exceptional, usually restricted to specific versions, and the 
  servent's author is informed about the banning.   
</p>

<h3><a name="gnet6">What does "Outdated version, please upgrade" mean?</a></h3>
<p>
  Versions of gtk-gnutella more than one year old are banned, since they 
  lack features that are important to the rapidly evolving gnet's health and 
  scalability.  In addition, unstable versions are banned after 90 days.  
</p>

<h3><a name="gnet7">Why doesn't my HTTP proxy work?</a></h3>
<p>
  Your HTTP proxy must support the method CONNECT because a normal GET
  doesn't work with Gnutella connections. This is an extension to the HTTP
  protocol and mainly supported by SQUID proxies. It's also often deactivated
  because it might be considered a security problem by your provider. At the
  moment, the proxy support - also for SOCKS - isn't very good. The developers
  don't use proxies but if you think you can fix it, we would appreciate
  your patches.  
</p>

<h2>Searches</h2>

<h3><a name="search0">How can I get more results?</a></h3>
<p>
  The number of results you get depends heavily on whether people are able to
  connect to you (see <a href="#gnet1">port forwarding</a>)
  and on the <a href="#gnet0">number of connections</a> to other hosts.
</p>

<h3><a name="search1">Where did the filters go??</a></h3>
<p>
  If you don't see the filter button in your gtk-gnutella you should probably 
  enable the toolbar in the menu :)
</p>

<h3><a name="search3">How can I ignore files with no SHA1?</a></h3>
<p>
  Click with right mouse button on a search result without a SHA1 and
  select "Drop results with urn:sha1" from the popup menu. That will drop
  all results with this SHA1 - in this case none - from your results. You'll
  miss a lot of spam.
</p>

<h2>Downloads</h2>

<h3><a name="down0">What does the status "Ignoring requested [SHA1|name & size]" mean?</a></h3>
<p>
  This means that gtk-gnutella has that file recorded as complete in its fileinfo 
  database. This database is usually located in ~/.gtk-gnutella/fileinfo. At the 
  moment, there is no way to remove or modify an entry of that database from the 
  gui, but you can edit the file with any text editor while gtk-gnutella is not 
  running. 
</p>

<h3><a name="down1">What does the status "No URN on server" mean?</a></h3>
<p>
  This means that gtk-gnutella wants to download a new file from a host, but
  that host does not provide a SHA1 hash for the file. Since the file is new
  (not yet partially downloaded), gtk-gnutella cannot do an overlap check to
  verify that the file on the host is really the file you want. In such a case
  it relies on the SHA1 provided by the remote host, but if no SHA1 is supplied,
  then gtk-gnutella has no way of assuring that the file it wants to download
  and the file on the remote server are really the same.<br>
  If you get annoyed by those messages you can activate the "optimistic first
  chunk" option on the "download settings" tab in the config page.
</p>

<h3><a name="down2">Why is the same file downloaded X times?</a></h3>
<p>
  Check the "Range" column. This is called <a href="#down3">swarming</a>.
  Gtk-gnutella tries to get the file in <a href="#down4">chunks</a> and will
  get it from multiple hosts in parallel, if possible.
</p>

<h3><a name="down3">What is "swarming"?</a></h3>
<p>
  Swarming describes the ability to download a single file from multiple hosts
  in parallel. Gtk-gnutella will automatically try to find additional sources
  for any queued file using the <a href="#down5">download mesh</a> and by
  monitoring routed results.
</p>

<h3><a name="down4">What is a "chunk"?</a></h3>
<p>
  A chunk is another word for "part of a file". When gtk-gnutella runs in
  <a href="#down4">swarming mode</a> it will retrieve multiple chunks of a
  downloading file until it has downloaded the complete file. The "Range"
  column shows you which chunk you are currently downloading.
</p>

<h3><a name="down5">What is the "download mesh"?</a></h3>
<p>
  When you download a file from a host that supports the download mesh,
  it will tell you about additional sources for the requested file
  (provided it knows of any). Those will then be used for
  <a href="#down4">swarming</a>
</p>

<h3><a name="down6">What is a "push request"?</a></h3>
<p>
  The "push request" is a facility to download files from hosts you cannot 
  connect to directly (because they are firewalled). Well, you cannot
  connect to those hosts, but they probably can connect to you. To
  tell a remote host to connect to your host so that you can download
  a file from the remote host you send a push request to it.<br>
  You can't make use of push requests when you are behind a firewall
  (see <a href="#gnet1">port forwarding</a>).
</p>

<h3><a name="down7">Why does gtk-gnutella append a .OK to my file names?</a></h3>
<p>
  You probably haven't set up different directories for downloaded files, 
  temporary files and bad files.
</p>

<h2>Uploads</h2>

<h3><a name="up0">What does "Normalized" mean?</a></h3>
<p>
  This shows the total amount of bytes uploaded for the file divided by the file size.
</p>

<h2>GTK+ 2.x</h2>

<h3><a name="gtk2_fonts">I have problems with the fonts.</a></h3>
<p>
  Set the environment variable GDK_USE_XFT to 0 or 1 and see whether
  this helps. You can also define which font should be used by putting
  the following line into your ~/.gtkrc-2.0 file:<br>
  gtk-font-name = "Sans 12"<br>
  Sans is the name of the font and 12 the size. Don't miss the whitespace.
</p>

 
<h3><a name="gtk2_ctype">Non-ASCII characters show up as _ (underscore).</a></h3>
<p>
  Set the environment variable LC_CTYPE or LC_ALL to an appropriate value
  for the encoding you use. For example, if you use special German characters
  in your filenames, set it to de_DE.ISO8859-1. The valid values depend on your
  Operating System; see setlocale(3) for details. Ideally, everyone would
  use UTF-8 encoding which covers nearly all languages.
</p>
